import requests

def get_top_spot_symbols():
    url = "https://api.bybit.com/spot/v1/tickers"
    try:
        response = requests.get(url, timeout=10)
        response.raise_for_status()
        data = response.json()
    except requests.RequestException as e:
        print(f"Network/API error: {e}")
        return []

    if data.get('ret_code') != 0:
        print(f"API returned error: {data.get('ret_msg', 'Unknown error')}")
        return []

    tickers = data.get('result', [])

    # تجهيز قائمة الرموز مع حجم التداول (volume)
    volume_data = []
    for ticker in tickers:
        symbol = ticker.get('symbol')
        try:
            volume = float(ticker.get('volume', 0))
        except (ValueError, TypeError):
            volume = 0

        if volume > 0:
            volume_data.append({'symbol': symbol, 'volume': volume})

    # ترتيب حسب الحجم نزولياً
    volume_data.sort(key=lambda x: x['volume'], reverse=True)

    # جلب أول 5 رموز
    top_5 = [item['symbol'] for item in volume_data[:5]]

    return top_5


# اختبار الدالة
if __name__ == "__main__":
    top5 = get_top_spot_symbols()
    print("Top 5 Spot Symbols by Volume:", top5)
